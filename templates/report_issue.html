{% extends "base.html" %}


<!-- Google Maps JavaScript API -->
<script async defer
    src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY_HERE&libraries=geometry&callback=initMap"></script>


{% block content %}
<div class="container-fluid">
    <div class="row justify-content-center">
        <div class="col-md-10 col-lg-8">
            <div
                class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-2">
                <div class="w-100">
                    <h1 class="h2">Report an Issue</h1>
                    <p class="text-muted">Help improve your community by reporting issues</p>
                </div>
            </div>
            {% with messages = get_flashed_messages() %}
            {% if messages %}
            {% for message in messages %}
            <p style="color: red; font-size: 12px; text-align: center;" class="flash text-danger">{{ message }}</p>
            {% endfor %}
            {% endif %}
            {% endwith %}
            <form class="needs-validation" action="{{ url_for('report_issue') }}" method="post"
                enctype="multipart/form-data">
                <div class="row g-3">
                    <div class="col-12">
                        <label for="category" class="form-label">Category <span class="text-danger">*</span></label>
                        <select name="category" class="form-select" id="category" required>
                            <option value="">Choose issue type...</option>
                            <option value="road">Road/Infrastructure</option>
                            <option value="lighting">Street Lighting</option>
                            <option value="waste">Waste Management</option>
                            <option value="water">Water Supply</option>
                            <option value="drainage">Drainage/Flooding</option>
                            <option value="security">Security/Safety</option>
                            <option value="environmental">Environmental</option>
                            <option value="other">Other</option>
                        </select>
                        <div class="invalid-feedback">
                            Please select an issue type.
                        </div>
                    </div>

                    <div class="col-12">
                        <label for="location" class="form-label">Location <span class="text-danger">*</span></label>
                        <input name="location" type="text" class="form-control" id="location"
                            placeholder="Street address or landmark" required>
                        <div class="invalid-feedback">
                            Please enter the location of the issue.
                        </div>
                    </div>

                    <div class="col-md-6">
                        <label for="area" class="form-label">Area/District <span class="text-danger">*</span></label>
                        <select name="area" class="form-select" id="area" required>
                            <option value="">Choose area...</option>
                            <option value="victoria-island">Victoria Island</option>
                            <option value="ikoyi">Ikoyi</option>
                            <option value="lekki-phase1">Lekki Phase 1</option>
                            <option value="lekki-phase2">Lekki Phase 2</option>
                            <option value="ajah">Ajah</option>
                            <option value="banana-island">Banana Island</option>
                            <option value="other">Other</option>
                        </select>
                        <div class="invalid-feedback">
                            Please select an area.
                        </div>
                    </div>

                    <div class="col-md-6">
                        <label for="priority" class="form-label">Priority Level</label>
                        <select name="priority" class="form-select" id="priority">
                            <option value="low">Low</option>
                            <option value="medium" selected>Medium</option>
                            <option value="high">High</option>
                            <option value="urgent">Urgent</option>
                        </select>
                    </div>

                    <div class="col-12">
                        <label for="description" class="form-label">Detailed Description <span
                                class="text-danger">*</span></label>
                        <textarea name="description" class="form-control" id="description" rows="4"
                            placeholder="Please provide a detailed description of the issue..." required></textarea>
                        <div class="invalid-feedback">
                            Please provide a detailed description of the issue.
                        </div>
                    </div>

                    <div class="col-12">
                        <label for="imageUpload" class="form-label">Upload Images/Videos <span
                                class="text-muted">(Optional)</span></label>
                        <input name="file" type="file" class="form-control" id="imageUpload" multiple
                            accept="image/*,video/*">
                        <div class="form-text">You can upload up to 5 images (JPG, PNG, GIF) or videos (MP4, AVI, MOV)
                            up to 10MB each.</div>
                    </div>
                </div>

                <div class="text-center">
                    <button class="btn btn-dark btn-md px-5" type="submit"><i class="fas fa-paper-plane"></i>
                         Submit Report
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

{% endblock %}